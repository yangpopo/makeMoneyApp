import{n as w}from"./navBox-C2g8fvgp.js";import{d as I,i as x,j as b,r as f,h as y,o as a,c as n,a as _,w as C,b as e,t as i,u as c,e as S,F as D,l as B,p as N,g as R,C as T,I as F,_ as L}from"./index-BHC9SGJp.js";import{i as h}from"./axios-DLOumnlT.js";import{a as j}from"./function-call-BZ0bvZD1.js";import{N as E}from"./index-K9fFoL6k.js";import"./use-expose-DedaC2ld.js";import"./use-touch-Oq4AsWfP.js";import"./on-popup-reopen-C12nAhSj.js";import"./use-scope-id-BMLEpVgn.js";const V=""+new URL("signIn-but-CcEj9mlp.png",import.meta.url).href,z=""+new URL("icon-GnMklOSd.png",import.meta.url).href,M=()=>h({method:"get",url:"signin/index"}),O=()=>h({method:"post",url:"signin/signin"}),Q=r=>(N("data-v-ede8129b"),r=r(),R(),r),U={class:"signIn"},A={class:"container-box"},G={class:"head-box"},W={class:"total-info"},q={class:"val"},H=Q(()=>e("img",{class:"icon",src:z,alt:""},null,-1)),J={class:"calendar-box"},K={class:"tilte-h1"},P={class:"calendar"},X={class:"val"},Y={key:0,class:"date"},Z={key:1,class:"icon"},$={class:"week"},ee={name:"signIn"},se=I({...ee,setup(r){const g=x();let u=b([]),l=f(0),p=f(0);function m(){M().then(t=>{if(t.code==0){l.value=0;let d=0,s=new Date(t.data.day_date).getTime();t.data.weeks.forEach(o=>{o.dateFormat=o.date.slice(5,o.date.length).replaceAll("-","."),l.value=l.value+o.score,o.score>0?d++:s>=new Date(o.date).getTime()&&(d=0)}),p.value=d,Object.assign(u,t.data.weeks)}})}const v=()=>{O().then(t=>{t.code==0&&(j("签到成功!"),m())})},k=()=>{g.go(-1)};return y(()=>{m()}),(t,d)=>(a(),n("div",U,[_(w,{class:"head"},{default:C(()=>[_(c(E),{"left-arrow":"",title:"签到有礼",onClickLeft:k})]),_:1}),e("div",A,[e("div",G,[e("div",W,[e("div",q,[e("b",null,i(c(l))+".00",1),S("积分")]),e("img",{class:"signin-but",src:V,alt:"",onClick:v})]),H]),e("div",J,[e("div",K,"已连续签到"+i(c(p))+"天",1),e("div",P,[(a(!0),n(D,null,B(c(u),s=>(a(),n("dl",{class:T(["record-item",{"is-fulfil":s.score}]),key:s.week},[e("dt",null,[e("span",X,i(s.score>0?"+"+s.score:0),1),s.score?(a(),n("span",Z,[_(c(F),{name:"success",size:"10",color:"#fff"})])):(a(),n("span",Y,i(s.dateFormat),1))]),e("dd",$,i(s.week),1)],2))),128))])])])]))}}),_e=L(se,[["__scopeId","data-v-ede8129b"]]);export{_e as default};
