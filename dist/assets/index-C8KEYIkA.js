import{an as de,ao as J,ap as ue,aq as He,r as C,ar as Oe,as as Le,at as Ne,au as Ee,av as fe,C as W,D as z,G as ve,H as O,d as Z,aw as he,s as be,K as R,ah as me,Y as ge,Q as De,M as $,ag as ye,ax as X,ab as A,ay as L,az as we,aA as Me,a as m,h as p,ae as q,aB as We,J as M,V as Ze,aC as Fe,a5 as oe,ac as Q,al as Ve,aD as Ke,aE as ie,aF as Ue,aG as Ye,Z as je,a2 as qe,a0 as Ge,af as Je,aH as Xe,x as Qe,O as pe,B as et,aI as tt,aJ as nt,P as at,a4 as re,aK as lt,aL as ot}from"./index-DOklq4cR.js";import{u as xe}from"./use-id-P2NRv5Or.js";import{u as ee}from"./use-expose-Ds_Trjn3.js";import{T as it}from"./index-VfTPFInW.js";import{a as rt,S as st}from"./index-Czj9vsjP.js";import{o as ct}from"./on-popup-reopen-B-mOa00z.js";import{c as dt}from"./index-BbiEO6h5.js";function ut(e,a,i){let l,s=0;const t=e.scrollLeft,r=i===0?1:Math.round(i*1e3/16);function c(){de(l)}function v(){e.scrollLeft+=(a-t)/r,++s<r&&(l=J(v))}return v(),c}function ft(e,a,i,l){let s,t=ue(e);const r=t<a,c=i===0?1:Math.round(i*1e3/16),v=(a-t)/c;function g(){de(s)}function w(){t+=v,(r&&t>a||!r&&t<a)&&(t=a),He(e,t),r&&t<a||!r&&t>a?s=J(w):l&&(s=J(l))}return w(),g}function vt(){const e=C([]),a=[];return Oe(()=>{e.value=[]}),[e,l=>(a[l]||(a[l]=s=>{e.value[l]=s}),a[l])]}function Te(e,a){if(!Le||!window.IntersectionObserver)return;const i=new IntersectionObserver(t=>{a(t[0].intersectionRatio>0)},{root:document.body}),l=()=>{e.value&&i.observe(e.value)},s=()=>{e.value&&i.unobserve(e.value)};Ne(s),Ee(s),fe(l)}const[ht,bt]=W("sticky"),mt={zIndex:z,position:ve("top"),container:Object,offsetTop:O(0),offsetBottom:O(0)};var gt=Z({name:ht,props:mt,emits:["scroll","change"],setup(e,{emit:a,slots:i}){const l=C(),s=he(l),t=be({fixed:!1,width:0,height:0,transform:0}),r=C(!1),c=R(()=>me(e.position==="top"?e.offsetTop:e.offsetBottom)),v=R(()=>{if(r.value)return;const{fixed:f,height:S,width:u}=t;if(f)return{width:`${u}px`,height:`${S}px`}}),g=R(()=>{if(!t.fixed||r.value)return;const f=ge(De(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${c.value}px`});return t.transform&&(f.transform=`translate3d(0, ${t.transform}px, 0)`),f}),w=f=>a("scroll",{scrollTop:f,isFixed:t.fixed}),k=()=>{if(!l.value||X(l))return;const{container:f,position:S}=e,u=L(l),T=ue(window);if(t.width=u.width,t.height=u.height,S==="top")if(f){const d=L(f),B=d.bottom-c.value-t.height;t.fixed=c.value>u.top&&d.bottom>0,t.transform=B<0?B:0}else t.fixed=c.value>u.top;else{const{clientHeight:d}=document.documentElement;if(f){const B=L(f),b=d-B.top-c.value-t.height;t.fixed=d-c.value<u.bottom&&d>B.top,t.transform=b<0?-b:0}else t.fixed=d-c.value<u.bottom}w(T)};return $(()=>t.fixed,f=>a("change",f)),ye("scroll",k,{target:s,passive:!0}),Te(l,k),$([we,Me],()=>{!l.value||X(l)||!t.fixed||(r.value=!0,A(()=>{const f=L(l);t.width=f.width,t.height=f.height,r.value=!1}))}),()=>{var f;return m("div",{ref:l,style:v.value},[m("div",{class:bt({fixed:t.fixed&&!r.value}),style:g.value},[(f=i.default)==null?void 0:f.call(i)])])}}});const yt=p(gt),[wt,se]=W("tabs");var xt=Z({name:wt,props:{count:q(Number),inited:Boolean,animated:Boolean,duration:q(z),swipeable:Boolean,lazyRender:Boolean,currentIndex:q(Number)},emits:["change"],setup(e,{emit:a,slots:i}){const l=C(),s=c=>a("change",c),t=()=>{var c;const v=(c=i.default)==null?void 0:c.call(i);return e.animated||e.swipeable?m(rt,{ref:l,loop:!1,class:se("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:s},{default:()=>[v]}):v},r=c=>{const v=l.value;v&&v.state.active!==c&&v.swipeTo(c,{immediate:!e.inited})};return $(()=>e.currentIndex,r),We(()=>{r(e.currentIndex)}),ee({swipeRef:l}),()=>m("div",{class:se("content",{animated:e.animated||e.swipeable})},[t()])}});const[Se,j]=W("tabs"),Tt={type:ve("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:O(0),duration:O(.3),animated:Boolean,ellipsis:M,swipeable:Boolean,scrollspy:Boolean,offsetTop:O(0),background:String,lazyRender:M,showHeader:M,lineWidth:z,lineHeight:z,beforeChange:Function,swipeThreshold:O(5),titleActiveColor:String,titleInactiveColor:String},Ce=Symbol(Se);var St=Z({name:Se,props:Tt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:i}){let l,s,t,r,c;const v=C(),g=C(),w=C(),k=C(),f=xe(),S=he(v),[u,T]=vt(),{children:d,linkChildren:B}=Ze(Ce),b=be({inited:!1,position:"",lineStyle:{},currentIndex:-1}),N=R(()=>d.length>+e.swipeThreshold||!e.ellipsis||e.shrink),F=R(()=>({borderColor:e.color,background:e.background})),E=(n,o)=>{var h;return(h=n.name)!=null?h:o},V=R(()=>{const n=d[b.currentIndex];if(n)return E(n,b.currentIndex)}),H=R(()=>me(e.offsetTop)),te=R(()=>e.sticky?H.value+l:0),D=n=>{const o=g.value,h=u.value;if(!N.value||!o||!h||!h[b.currentIndex])return;const x=h[b.currentIndex].$el,y=x.offsetLeft-(o.offsetWidth-x.offsetWidth)/2;r&&r(),r=ut(o,y,n?0:+e.duration)},_=()=>{const n=b.inited;A(()=>{const o=u.value;if(!o||!o[b.currentIndex]||e.type!=="line"||X(v.value))return;const h=o[b.currentIndex].$el,{lineWidth:x,lineHeight:y}=e,I=h.offsetLeft+h.offsetWidth/2,P={width:oe(x),backgroundColor:e.color,transform:`translateX(${I}px) translateX(-50%)`};if(n&&(P.transitionDuration=`${e.duration}s`),Q(y)){const Y=oe(y);P.height=Y,P.borderRadius=Y}b.lineStyle=P})},Ie=n=>{const o=n<b.currentIndex?-1:1;for(;n>=0&&n<d.length;){if(!d[n].disabled)return n;n+=o}},K=(n,o)=>{const h=Ie(n);if(!Q(h))return;const x=d[h],y=E(x,h),I=b.currentIndex!==null;b.currentIndex!==h&&(b.currentIndex=h,o||D(),_()),y!==e.active&&(a("update:active",y),I&&a("change",y,x.title)),t&&!e.scrollspy&&Ke(Math.ceil(ie(v.value)-H.value))},U=(n,o)=>{const h=d.find((y,I)=>E(y,I)===n),x=h?d.indexOf(h):0;K(x,o)},ne=(n=!1)=>{if(e.scrollspy){const o=d[b.currentIndex].$el;if(o&&S.value){const h=ie(o,S.value)-te.value;s=!0,c&&c(),c=ft(S.value,h,n?0:+e.duration,()=>{s=!1})}}},Re=(n,o,h)=>{const{title:x,disabled:y}=d[o],I=E(d[o],o);y||(dt(e.beforeChange,{args:[I],done:()=>{K(o),ne()}}),Ue(n)),a("clickTab",{name:I,title:x,event:h,disabled:y})},ke=n=>{t=n.isFixed,a("scroll",n)},Be=n=>{A(()=>{U(n),ne(!0)})},$e=()=>{for(let n=0;n<d.length;n++){const{top:o}=L(d[n].$el);if(o>te.value)return n===0?0:n-1}return d.length-1},_e=()=>{if(e.scrollspy&&!s){const n=$e();K(n)}},Pe=()=>{if(e.type==="line"&&d.length)return m("div",{class:j("line"),style:b.lineStyle},null)},ae=()=>{var n,o,h;const{type:x,border:y,sticky:I}=e,P=[m("div",{ref:I?void 0:w,class:[j("wrap"),{[Ve]:x==="line"&&y}]},[m("div",{ref:g,role:"tablist",class:j("nav",[x,{shrink:e.shrink,complete:N.value}]),style:F.value,"aria-orientation":"horizontal"},[(n=i["nav-left"])==null?void 0:n.call(i),d.map(Y=>Y.renderTitle(Re)),Pe(),(o=i["nav-right"])==null?void 0:o.call(i)])]),(h=i["nav-bottom"])==null?void 0:h.call(i)];return I?m("div",{ref:w},[P]):P},le=()=>{_(),A(()=>{var n,o;D(!0),(o=(n=k.value)==null?void 0:n.swipeRef.value)==null||o.resize()})};$(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],_),$(we,le),$(()=>e.active,n=>{n!==V.value&&U(n)}),$(()=>d.length,()=>{b.inited&&(U(e.active),_(),A(()=>{D(!0)}))});const Ae=()=>{U(e.active,!0),A(()=>{b.inited=!0,w.value&&(l=L(w.value).height),D(!0)})},ze=(n,o)=>a("rendered",n,o);return ee({resize:le,scrollTo:Be}),Fe(_),ct(_),fe(Ae),Te(v,_),ye("scroll",_e,{target:S,passive:!0}),B({id:f,props:e,setLine:_,scrollable:N,onRendered:ze,currentName:V,setTitleRefs:T,scrollIntoView:D}),()=>m("div",{ref:v,class:j([e.type])},[e.showHeader?e.sticky?m(yt,{container:v.value,offsetTop:H.value,onScroll:ke},{default:()=>[ae()]}):ae():null,m(xt,{ref:k,count:d.length,inited:b.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:b.currentIndex,onChange:K},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}});const[Ct,ce]=W("tab"),It=Z({name:Ct,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:z,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:M},setup(e,{slots:a}){const i=R(()=>{const s={},{type:t,color:r,disabled:c,isActive:v,activeColor:g,inactiveColor:w}=e;r&&t==="card"&&(s.borderColor=r,c||(v?s.backgroundColor=r:s.color=r));const f=v?g:w;return f&&(s.color=f),s}),l=()=>{const s=m("span",{class:ce("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||Q(e.badge)&&e.badge!==""?m(Ye,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[s]}):s};return()=>m("div",{id:e.id,role:"tab",class:[ce([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[l()])}}),[Rt,G]=W("tab"),kt=ge({},je,{dot:Boolean,name:z,badge:z,title:String,disabled:Boolean,titleClass:qe,titleStyle:[String,Object],showZeroBadge:M});var Bt=Z({name:Rt,props:kt,setup(e,{slots:a}){const i=xe(),l=C(!1),s=ot(),{parent:t,index:r}=Ge(Ce);if(!t)return;const c=()=>{var u;return(u=e.name)!=null?u:r.value},v=()=>{l.value=!0,t.props.lazyRender&&A(()=>{t.onRendered(c(),e.title)})},g=R(()=>{const u=c()===t.currentName.value;return u&&!l.value&&v(),u}),w=C(""),k=C("");Je(()=>{const{titleClass:u,titleStyle:T}=e;w.value=u?et(u):"",k.value=T&&typeof T!="string"?tt(nt(T)):T});const f=u=>m(It,at({key:i,id:`${t.id}-${r.value}`,ref:t.setTitleRefs(r.value),style:k.value,class:w.value,isActive:g.value,controls:i,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:T=>u(s.proxy,r.value,T)},re(t.props,["type","color","shrink"]),re(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),S=C(!g.value);return $(g,u=>{u?S.value=!1:lt(()=>{S.value=!0})}),$(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),Xe(it,g),ee({id:i,renderTitle:f}),()=>{var u;const T=`${t.id}-${r.value}`,{animated:d,swipeable:B,scrollspy:b,lazyRender:N}=t.props;if(!a.default&&!d)return;const F=b||g.value;if(d||B)return m(st,{id:i,role:"tabpanel",class:G("panel-wrapper",{inactive:S.value}),tabindex:g.value?0:-1,"aria-hidden":!g.value,"aria-labelledby":T},{default:()=>{var H;return[m("div",{class:G("panel")},[(H=a.default)==null?void 0:H.call(a)])]}});const V=l.value||b||!N?(u=a.default)==null?void 0:u.call(a):null;return Qe(m("div",{id:i,role:"tabpanel",class:G("panel"),tabindex:F?0:-1,"aria-labelledby":T},[V]),[[pe,F]])}}});const Lt=p(Bt),Nt=p(St);export{Lt as T,Nt as a};
