import{n as D}from"./navBox-C2g8fvgp.js";import{p as N,P as R}from"./popupBox-Ec92Owaq.js";import{d as U,a3 as V,j as v,i as y,r as d,o as P,c as $,a,w as f,b as _,u as o,k as p,p as A,g as F,_ as T}from"./index-BHC9SGJp.js";import{u as j}from"./axios-DLOumnlT.js";import{c as E}from"./userAccount-Df610Yq0.js";import{D as G}from"./index-CezzUHI8.js";import{a as K}from"./function-call-BZ0bvZD1.js";import{N as L}from"./index-K9fFoL6k.js";import{C as x}from"./index-8APRFFDT.js";import{C as q}from"./index-D3jJ5Xq9.js";import{F as z}from"./index-BMiqAVpo.js";import{A as H}from"./index-DPj42iWT.js";import"./use-expose-DedaC2ld.js";import"./use-touch-Oq4AsWfP.js";/* empty css                                                                 */import"./on-popup-reopen-C12nAhSj.js";import"./use-scope-id-BMLEpVgn.js";import"./use-id-BxoQQVrJ.js";const J=u=>(A("data-v-3509684f"),u=u(),F(),u),M={class:"call-center"},O={class:"container-box"},Q=J(()=>_("h1",{class:"title-h1"},"基本资料",-1)),W={name:"callCenter"},X=U({...W,setup(u){const C=j(),{userInfo:i,ageIndexKey:c}=V(C);console.log(c.value,"*-*---*-*-*");const s=v({user_name:i.value.username,sex:i.value.sex,age:i.value.age}),g=()=>{w.go(-1)},w=y();let l=d(!1);const k=()=>{l.value=!1};let n=d(!1);const S=v([{name:"男",value:1},{name:"女",value:0}]),I=r=>{s.sex=r.value,n.value=!1},m=d(),h=v(c.value),b=r=>{s.age=r.selectedValues[0],m.value.isShow=!1},B=()=>{E(s).then(r=>{r.code==0&&(K("修改成功"),C.updateUserInfo({username:s.user_name,sex:s.sex,age:s.age,user_acc:i.value.user_acc}),g())})};return(r,e)=>(P(),$("div",M,[a(D,{class:"nav-box"},{default:f(()=>[a(o(L),{"left-arrow":"",title:"个人资料",onClickLeft:g})]),_:1}),_("div",O,[Q,a(o(q),{class:"cell-box"},{default:f(()=>[a(o(x),{title:"昵称",value:s.user_name,onClick:e[0]||(e[0]=t=>p(l)?l.value=!0:l=!0)},null,8,["value"]),a(o(x),{title:"性别",value:s.sex==0?"女":"男","is-link":"",onClick:e[1]||(e[1]=t=>p(n)?n.value=!0:n=!0)},null,8,["value"]),a(o(x),{title:"年龄",value:o(c)[s.age].text,"is-link":"",onClick:e[2]||(e[2]=t=>m.value.isShow=!0)},null,8,["value"])]),_:1}),_("div",{class:"save-but",onClick:B},"保存")]),a(o(G),{show:o(l),title:"修改昵称","show-cancel-button":"",onCancel:e[4]||(e[4]=t=>p(l)?l.value=!1:l=!1),onConfirm:k},{default:f(()=>[a(o(z),{modelValue:s.user_name,"onUpdate:modelValue":e[3]||(e[3]=t=>s.user_name=t),label:"昵称",placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1},8,["show"]),a(o(H),{teleport:"body",show:o(n),"onUpdate:show":e[5]||(e[5]=t=>p(n)?n.value=t:n=t),actions:S,onSelect:I,"cancel-text":"取消"},null,8,["show","actions"]),a(N,{ref_key:"agePopupRef",ref:m,option:{position:"bottom",round:!0}},{default:f(()=>[a(o(R),{title:"选择年龄",columns:h,onConfirm:b,onCancel:e[6]||(e[6]=t=>m.value.isShow=!1)},null,8,["columns"])]),_:1},512)]))}}),xe=T(X,[["__scopeId","data-v-3509684f"]]);export{xe as default};
