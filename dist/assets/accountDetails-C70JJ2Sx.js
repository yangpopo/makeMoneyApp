import{d as H,i as J,j as g,r as f,h as K,o as p,c as w,a as u,w as v,u as n,b as o,e as m,m as z,I as D,t as c,f as W,C as x,F as I,l as X,s as Z,p as ee,g as te,_ as se}from"./index-BHC9SGJp.js";import{o as oe,_ as ne}from"./overlayBox-DPlq24f8.js";import{n as ae}from"./navBox-C2g8fvgp.js";import{p as le,P as re}from"./popupBox-Ec92Owaq.js";import{z as h,f as E,m as ie}from"./public-BGJDh4yb.js";import{u as ue,b as ce,c as de}from"./moneyIntegral-BJdKw8xE.js";import{s as fe}from"./function-call-BZ0bvZD1.js";import{N as pe}from"./index-K9fFoL6k.js";import{L as me,P as ye}from"./index-D6Rq74fQ.js";import"./use-expose-DedaC2ld.js";import"./use-touch-Oq4AsWfP.js";/* empty css                                                                 */import"./axios-DLOumnlT.js";import"./on-popup-reopen-C12nAhSj.js";import"./use-scope-id-BMLEpVgn.js";const ve=""+new URL("integral-icon-bFTAtYOp.png",import.meta.url).href,F=k=>(ee("data-v-54048486"),k=k(),te(),k),he={class:"account-details"},_e={class:"balance-box"},ge={class:"total"},we={class:"title-box"},xe={class:"nav-column"},ke={class:"screen-column"},be={class:"date"},Se={class:"date"},Ce={class:"total-box"},De=F(()=>o("img",{class:"integral-icon",src:ve,alt:""},null,-1)),Fe={class:"explain"},Te={class:"val"},$e=F(()=>o("img",{class:"icon-logo",src:ne,alt:""},null,-1)),Me=F(()=>o("h1",{class:"title"},"收益说明",-1)),Re=F(()=>o("div",{class:"content-box"}," asdfasdfasdfasdfasdfasdfasdfasdfsadfasdf阿斯顿发生大区分啥地方阿斯顿发送到发阿斯顿发送到发阿斯顿发是打发斯蒂芬阿斯顿发送到发阿斯顿发送到发沙发as",-1)),Ie={name:"accountDetails"},Ne=H({...Ie,setup(k){const Y=ue(),q=J();let y=g({year:"2024",month:"02"});function T(s){return ie(s)}const l=g({start:0,end:0,type:0});let d=f(0);const N=s=>{d.value=s,l.type=0,r.splice(0,r.length),_()};function $(s){l.type=s,r.splice(0,r.length),_()}const j=()=>{q.go(-1)},b=f(!0);let r=g([]);const i=g({income:0,expend:0});async function _(){let s=[];d.value==0?s=[ce(l)]:d.value==1&&(s=[de(l)]),await Promise.all(s).then(t=>{t[0].code==0&&(Object.assign(r,t[0].data),l.type==0&&(i.income=0,i.expend=0),d.value==0?r.forEach(e=>{e.timeFormat=E((Number.parseInt(e.add_time)*1e3).toString()),l.type==0&&(e.add_type==1?i.income=(i.income*100+Number.parseFloat((e==null?void 0:e.money_num)||"0")*100)/100:i.expend=(i.expend*100+Number.parseFloat((e==null?void 0:e.money_num)||"0")*100)/100)}):d.value==1&&r.forEach(e=>{e.timeFormat=E((Number.parseInt(e.add_time)*1e3).toString()),l.type==0&&(e.add_type==1?i.income=(i.income*100+Number.parseFloat((e==null?void 0:e.score_num)||"0")*100)/100:i.expend=(i.expend*100+Number.parseFloat((e==null?void 0:e.score_num)||"0")*100)/100)}))})}const M=f(!1),O=async()=>{r.splice(0,r.length),await _(),fe("刷新成功"),M.value=!1},R=f(!1),P=f(!1),U=async()=>{setTimeout(async()=>{await _(),R.value=!1,P.value=!0},1e3)},S=f(),Q=g((()=>{let s=[],t=new Date,e=t.getFullYear(),G=t.getMonth()+1;for(let a=4;a>0;a--)s.push({text:(e-a).toString(),value:(e-a).toString(),children:[]});for(let a=0;a<s.length;a++)for(let C=1;C<=12;C++)s[a].children.push({text:h(C).toString(),value:h(C).toString()});s.push({text:e,value:e,children:[]});for(let a=0;a<G;a++)s[s.length-1].children.push({text:h(a+1),value:h(a+1)});return s})());function A(s){V(s.selectedValues[0],s.selectedValues[1]),y.year=s.selectedValues[0],y.month=s.selectedValues[1],S.value.isShow=!1,r.splice(0,r.length),_()}function V(s=null,t=null){let e;!s||!t?e=new Date:e=new Date(`${s}/${t}/1`),e.setDate(1),l.start=e.getTime()/1e3,e.setMonth(e.getMonth()+1),l.end=e.getTime()/1e3}const B=f(),L=s=>{B.value.isShow=s};return K(()=>{y.year=h(new Date().getFullYear()),y.month=h(new Date().getMonth()+1),V()}),(s,t)=>(p(),w("div",he,[u(ae,{class:"head"},{default:v(()=>[u(n(pe),{"left-arrow":"",title:"账户",onClickLeft:j})]),_:1}),u(n(ye),{class:"container-box",modelValue:M.value,"onUpdate:modelValue":t[10]||(t[10]=e=>M.value=e),onRefresh:O},{default:v(()=>[u(n(me),{loading:R.value,"onUpdate:loading":t[9]||(t[9]=e=>R.value=e),finished:P.value,"finished-text":"没有更多了",onLoad:U},{default:v(()=>[o("div",_e,[o("dl",ge,[o("dt",null,[o("b",we,[m("当前账户可用金额(元) "),b.value?(p(),z(n(D),{key:0,onClick:t[0]||(t[0]=e=>b.value=!1),class:"eye-icon",name:"eye-o",color:"#fff",size:"15"})):(p(),z(n(D),{key:1,onClick:t[1]||(t[1]=e=>b.value=!0),class:"eye-icon",name:"closed-eye",color:"#fff",size:"15"}))]),u(n(D),{name:"question-o",color:"#fff",size:"15",onClick:t[2]||(t[2]=e=>L(!0))})]),o("dd",null,c(b.value?T(n(Y).money):"****"),1),u(n(W),{to:{name:"withdraw"},class:"withdraw-but"},{default:v(()=>[m("提现")]),_:1})])]),o("ul",xe,[o("li",{class:x({selected:n(d)==0}),onClick:t[3]||(t[3]=e=>N(0))},"金额明细",2),o("li",{class:x({selected:n(d)==1}),onClick:t[4]||(t[4]=e=>N(1))},"积分明细",2)]),o("ul",ke,[o("li",{class:x({selected:l.type===0}),onClick:t[5]||(t[5]=e=>$(0))},"全部",2),o("li",{class:x({selected:l.type===1}),onClick:t[6]||(t[6]=e=>$(1))},"收入",2),o("li",{class:x({selected:l.type===-1}),onClick:t[7]||(t[7]=e=>$(-1))},"支出",2)]),o("div",{class:"date-title",onClick:t[8]||(t[8]=e=>S.value.isShow=!0)},[o("b",be,c(n(y).year),1),m("年"),o("b",Se,c(n(y).month),1),m("月"),u(n(D),{name:"arrow-down"})]),o("ul",Ce,[o("li",null,"收入¥"+c(T(i.income)),1),o("li",null,"支出¥"+c(T(i.expend)),1)]),(p(!0),w(I,null,X(n(r),e=>(p(),w("div",{class:"detail-item",key:e.add_time},[De,o("dl",Fe,[o("dt",null,c(e.desc),1),o("dd",null,c(e.timeFormat),1)]),o("span",Te,[m(c(e.add_type==1?"+":"-")+" ",1),n(d)==0?(p(),w(I,{key:0},[m(c(e.money_num),1)],64)):(p(),w(I,{key:1},[m(c(e.score_num),1)],64))])]))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),u(le,{ref_key:"timePopupRef",ref:S,option:{position:"bottom",round:!0}},{default:v(()=>[u(n(re),{onCancel:t[11]||(t[11]=e=>S.value.isShow=!1),title:"筛选",columns:Q,onConfirm:A},null,8,["columns"])]),_:1},512),u(oe,{ref_key:"rulePopupRef",ref:B},{default:v(()=>[o("div",{class:"rule-box",onClick:t[13]||(t[13]=Z(()=>{},["stop"]))},[$e,Me,Re,o("div",{class:"close-but",onClick:t[12]||(t[12]=e=>L(!1))},"我知道了")])]),_:1},512)]))}}),Ke=se(Ne,[["__scopeId","data-v-54048486"]]);export{Ke as default};
